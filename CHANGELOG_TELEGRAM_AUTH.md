# Changelog: Telegram Authorization

## –î–æ–±–∞–≤–ª–µ–Ω–æ

### üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Telegram —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–º–µ–Ω–∏ –∏ –∞–≤–∞—Ç–∞—Ä–∫–∏.

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

#### –¢–∏–ø—ã –∏ Store
- `src/types/user.ts` - —Ç–∏–ø—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
- `src/store/auth.ts` - Zustand store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/components/auth/TelegramLogin.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram Login Widget
- `src/components/auth/UserProfile.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `src/components/auth/index.ts` - —ç–∫—Å–ø–æ—Ä—Ç—ã auth –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `TELEGRAM_SETUP.md` - –±—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- `docs/telegram-auth-setup.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `next.config.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã `remotePatterns` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–æ–∫ –∏–∑ Telegram

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/components/editor/Editor.tsx` - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ —Ç–æ–ø-–±–∞—Ä

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –°–æ–∑–¥–∞–π—Ç–µ Telegram –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –∫–æ–º–∞–Ω–¥–æ–π `/setdomain`
3. –°–æ–∑–¥–∞–π—Ç–µ `.env.local`:

```bash
NEXT_PUBLIC_TELEGRAM_BOT_NAME=your_bot_username
```

### –ë–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –≤ —Ç–æ–ø-–±–∞—Ä–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Zustand store
- Store –ø–µ—Ä—Å–∏—Å—Ç–∏—Ç—Å—è –≤ `localStorage` (–∫–ª—é—á: `auth-storage`)
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

### –ü–æ–ª—É—á–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç Telegram
```typescript
interface TelegramUser {
  id: number;                // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  first_name: string;        // –ò–º—è
  last_name?: string;        // –§–∞–º–∏–ª–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  username?: string;         // Username (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  photo_url?: string;        // URL –∞–≤–∞—Ç–∞—Ä–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  auth_date: number;         // Timestamp –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  hash: string;              // –•–µ—à –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI

**UserProfile** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
- –ê–≤–∞—Ç–∞—Ä–∫—É (–∏–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª—ã, –µ—Å–ª–∏ –Ω–µ—Ç —Ñ–æ—Ç–æ)
- –ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—é
- Username (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ö–Ω–æ–ø–∫—É "–í—ã–π—Ç–∏"

**TelegramLogin** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
- Telegram Login Widget (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω bot)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ bot –Ω–µ —É–∫–∞–∑–∞–Ω)

### Store API

```typescript
const { user, isAuthenticated, setUser, logout } = useAuthStore();
```

- `user: TelegramUser | null` - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `isAuthenticated: boolean` - —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `setUser(user)` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `logout()` - –≤—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞

## Security Note

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç static export (–±–µ–∑ –±—ç–∫–µ–Ω–¥–∞), –ø–æ—ç—Ç–æ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ. Telegram Widget —Å–∞–º –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π. –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å hash –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –Ω–æ –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤ —Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–º.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä: `npm run dev`
2. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000`
3. –ï—Å–ª–∏ –±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω - —É–≤–∏–¥–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Log in with Telegram"
4. –ï—Å–ª–∏ –Ω–µ—Ç - —É–≤–∏–¥–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
5. –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ - –≤ —Ç–æ–ø-–±–∞—Ä–µ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –°–≤—è–∑–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å server-side –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é (–µ—Å–ª–∏ –ø–µ—Ä–µ–π–¥–µ—Ç–µ –Ω–∞ SSR)
